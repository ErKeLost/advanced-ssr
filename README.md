# learn-ssr

## 跨请求状态污染

在spa页面中 整个生命周期中是有一个app对象实例 + 一个路由对象实例 + 一个store对象实例, 因为每个用户在使用浏览器访问spa应用时， 每个应用模块都会重新初始化，单例模式

比如 用户 A，B, C 分别在三台电脑中访问 nginx 中服务 spa 每次都会分发一个新的实例 只要一请求 就是一个新的实例

然后 在ssr 环境下 我们在代码中也可以看到 在服务器启动的时候 我们去初始化 app 应用模块 同一个应用模块会在多个服务器请求之间服用 

在服务端一般只会初始化请求一次

三个用户 每次请求拿到的都是同一个app实例 修改了状态会进行相互的污染行为 调用函数保证我们每次请求获取到的都是一个新的实例

解决问题 调用函数 每一台浏览器访问请求服务的时候都会调用函数拿到新的app 实例